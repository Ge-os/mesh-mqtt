# =============================================================================
# Mosquitto MQTT Broker â€“ Meshtastic Gateway Configuration
# =============================================================================
# Documentation: https://mosquitto.org/man/mosquitto-conf-5.html
# =============================================================================

# -----------------------------------------------------------------------------
# Listener
# -----------------------------------------------------------------------------
# Accept connections from any interface on port 1883 (plain MQTT).
# Meshtastic devices connect here directly over WiFi.
listener 1883 0.0.0.0

# Optional: Enable TLS listener on port 8883.
# Uncomment and provide your certificate files to enable encrypted connections.
# listener 8883 0.0.0.0
# cafile   /mosquitto/certs/ca.crt
# certfile /mosquitto/certs/server.crt
# keyfile  /mosquitto/certs/server.key
# tls_version tlsv1.2

# -----------------------------------------------------------------------------
# Authentication
# -----------------------------------------------------------------------------
# Require username/password. The password file is generated during setup.
# See docs/setup-guide.md for instructions.
allow_anonymous false
password_file /mosquitto/config/passwd

# -----------------------------------------------------------------------------
# Persistence
# -----------------------------------------------------------------------------
persistence true
persistence_location /mosquitto/data/

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
log_dest stdout
log_type error
log_type warning
log_type notice
log_type information
log_timestamp true
log_timestamp_format %Y-%m-%dT%H:%M:%S

# -----------------------------------------------------------------------------
# Limits
# -----------------------------------------------------------------------------
# Maximum number of queued messages for a subscriber (0 = unlimited).
max_queued_messages 1000

# Maximum in-flight messages per client.
max_inflight_messages 20
